<!DOCTYPE html>
<html>
    <head>
        <title>This is a file upload test!</title>
        <script src="../lib/jquery-3.5.1.js"></script>
    </head>

    <body>
        <form name="test" enctype="multipart/form-data" method="post" action="file_upload_php.php">
            
            

            <input type="button" onclick="chooseFile()" name="submit" value="Choose File" style="display:none;">
        

            <table  border=1 width="50%" id="buffer_table" name="buffer_table" style="width='50%';border: 1px solid black; border-collapse:collapse;">
                
                <tr>
                    <th width="10%">&nbsp;</th>
                    <th width="50%">File Name</th>
                    <th width="40%">File Size</th>
                    
                </tr>
                
                <tr id="last_row">
                    <td colspan=3>
                        <input type="button" name="add_button" value="Add File" onclick="writeName();">
                    </td>
                </tr>
            </table>

            <input type="submit" value="Submit">
        </form> 
    </body>

    <script type="text/javascript">
        $(document).ready(function(){
            //alert($("#last_row").index());
        }
            
        );
        var runningFileCount = 0;
        function writeName()
        {
            runningFileCount++;
            //var files = document.querySelector('input[type=file]').files[0].name;
            //var size = document.querySelector('input[type=file').files[0].size ;
            //var path = $("#file_id").val();
            /* 
            //this work with the classic javascript
            
            
            var lastRowIndex = $("#last_row").index();

            var myTable = document.getElementById("buffer_table");
            var row=myTable.insertRow(lastRowIndex);
            row.id = $(row).index();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);

            cell1.innerHTML = "<div onclick='removeRow(this)'>Delete</div>";
            cell2.innerHTML=files;
            cell3.innerHTML=size + " Bytes";
            */
            /* works with jQuery */
            $("#buffer_table tr[id=last_row]").before("<tr><td><div onclick='removeRow(this)' style='background-color:red; text-align:center;'>-</div></td> <td><input type='file' name='file_names[]' id='file_id_"+ runningFileCount+"' onchange='hideAndPopulate(this);'></td>");
            
        }

        function removeRow(ele)
        {
            //alert($(ele).data("index"));
            /* 
            //works with classic javascript 
            var myTable = document.getElementById("buffer_table");
            myTable.deleteRow($(ele).parent().parent().index());
            */
            $(ele).parent().parent().remove();
        }

        function chooseFile()
        {
            $("#file_id").click();
        }

        function hideAndPopulate(ele)
        {
            $(ele).hide();
            $(ele).after(ele.files[0].name);
            $(ele).parent().after("<td>" + ele.files[0].size + "</td>");
        }
    </script>
</html>